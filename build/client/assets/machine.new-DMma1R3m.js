import{r,j as e,u as w}from"./index-keZNs5ok.js";import{u as v}from"./useUserStore-CkyXIECU.js";import{s as k,d as S,c as z,a as M}from"./storage-CmIiShv6.js";const d=["Pecho","Piernas","Espalda","Brazos","Hombros","Abdomen","Otro"],I=["Bench_press.png","leg-press.png","lat-pulldown.png","bicep-curl.png","shoulder-press.png","tricep-extension.png"];function A({userId:s,onMachineAdded:n}){const[t,o]=r.useState(""),[u,m]=r.useState(d[0]),[g,b]=r.useState(""),[x,h]=r.useState(""),[p,c]=r.useState(""),[f,l]=r.useState(!1),j=async a=>{a.preventDefault(),c(""),l(!0);try{if(!t.trim()){c("El nombre es obligatorio"),l(!1);return}const i=Date.now().toString(),N=g.trim()||x||"default-machine.png",y={id:i,name:t.trim(),category:u,image:N,userId:s};await k(S(z(M,"machines"),i),y),n(y),o(""),m(d[0]),b(""),h("")}catch{c("Error al guardar la máquina")}finally{l(!1)}};return e.jsxs("form",{onSubmit:j,className:"bg-white dark:bg-zinc-800 rounded-lg shadow-lg p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Agregar Nueva Máquina"}),p&&e.jsx("div",{className:"mb-4 text-red-600",children:p}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:t,onChange:a=>o(a.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-zinc-700 dark:text-white",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Categoría"}),e.jsx("select",{value:u,onChange:a=>m(a.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-zinc-700 dark:text-white",children:d.map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Imagen (nombre de archivo, opcional)"}),e.jsx("input",{type:"text",value:g,onChange:a=>b(a.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-zinc-700 dark:text-white mb-2",placeholder:"default-machine.png"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:I.map(a=>e.jsx("button",{type:"button",className:`border rounded p-1 ${x===a?"ring-2 ring-blue-500":""}`,onClick:()=>h(a),title:a,children:e.jsx("img",{src:`/images/machines/${a}`,alt:a,className:"w-16 h-16 object-contain"})},a))})]}),e.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",disabled:f,children:f?"Guardando...":"Agregar Máquina"})]})}function q(){const{currentUser:s}=v();console.log("[NewMachine] currentUser:",s);const n=w();if(!s)return e.jsx("div",{className:"flex justify-center items-center h-screen",children:"Usuario no encontrado"});const t=o=>{n("/")};return e.jsx("div",{className:"container mx-auto px-4 py-8 flex justify-center items-center min-h-screen",children:e.jsx("div",{className:"max-w-lg w-full",children:e.jsx(A,{userId:s.id,onMachineAdded:t})})})}export{q as default};
